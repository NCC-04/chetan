<!DOCTYPE html>
<html>
<head>
  <title>YOLO Object Detection</title>
</head>
<body>
  <h1>Upload an Image</h1>
  <input type="file" id="upload" accept="image/*">
  <button onclick="uploadImage()">Detect</button>

  <h2>Results:</h2>
  <p id="detectedText"></p>
  <img id="processedImage" style="max-width:500px; border:1px solid black;">
  
  <script >
    async function uploadImage() {
  const fileInput = document.getElementById("upload");
  const detectedText = document.getElementById("detectedText");
  const processedImage = document.getElementById("processedImage");

  if (!fileInput.files.length) {
    alert("Please select an image");
    return;
  }

  const file = fileInput.files[0];
  const formData = new FormData();
  formData.append("image", file);

  try {
    const res = await fetch("/predict", { method: "POST", body: formData });
    if (!res.ok) throw new Error("Server error");

    const data = await res.json();
    processedImage.src = "data:image/jpeg;base64," + data.image;
    detectedText.textContent = data.text;
  } catch (err) {
    alert("Error: " + err.message);
  }
}

  </script>
</body>
</html>
